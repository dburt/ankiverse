<html>
<head>
  <title>AnkiVerse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script>
    $(function() {
      $('#add_field').click(function() {
        $(this).before( $(this).siblings('.other_field:last').clone() );
        $('.other_field:last input').val("");
      });
      $('#bible_form').submit(function() {
        if ($('#passage').val()) {
          newlocation = "/bible/" + $('#passage').val() +
            "/" + $('[name=version]:checked').attr('value') + "/";
          if ($('[name=verse_numbers]:checked').val() == 'with_verse_numbers') {
            newlocation = newlocation + $('[name=verse_numbers]:checked').attr('value');
          }
          document.location = newlocation;
        }
        return false;
      });
    });
  </script>

  <style>
    * { box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      max-width: 960px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
      background: #f8f9fa;
      color: #2c3e50;
      line-height: 1.5;
    }

    h1 {
      font-size: 2rem;
      font-weight: 700;
      margin: 0 0 0.25rem;
      color: #1a1a2e;
    }

    h2 {
      font-size: 1rem;
      font-weight: 400;
      color: #6c757d;
      margin: 0 0 1.5rem;
    }

    h2 a { color: #4a6fa5; text-decoration: none; }
    h2 a:hover { text-decoration: underline; }

    textarea {
      font-family: "SF Mono", "Fira Code", "Fira Mono", Menlo, Consolas, monospace;
      font-size: 0.875rem;
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #dee2e6;
      border-radius: 6px;
      background: #fff;
      resize: vertical;
    }
    textarea:focus { outline: none; border-color: #4a6fa5; box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.15); }

    td { vertical-align: top; }
    td + td { font-size: 0.85rem; color: #6c757d; padding: 0.5rem 1rem; }
    td > div { margin: 0.75rem 0; }

    input[name="lines[]"] { width: 3em; }

    input[type="text"], input[name="lines[]"] {
      padding: 0.4rem 0.5rem;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      font-size: 0.875rem;
    }
    input[type="text"]:focus, input[name="lines[]"]:focus {
      outline: none;
      border-color: #4a6fa5;
      box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.15);
    }

    input[type="submit"] {
      background: #4a6fa5;
      color: #fff;
      border: none;
      padding: 0.5rem 1.25rem;
      border-radius: 6px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      margin-top: 0.5rem;
    }
    input[type="submit"]:hover { background: #3d5d8a; }
    input[type="submit"]:active { background: #2e4a6e; }

    label { cursor: pointer; }

    #add_field {
      color: #4a6fa5;
      text-decoration: none;
      font-size: 0.85rem;
    }
    #add_field:hover { text-decoration: underline; }

    #bible_form {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid #dee2e6;
    }
    #bible_form label { margin-right: 0.75rem; }
    #bible_form br { margin-bottom: 0.5rem; }
    #bible_form input[type="text"] { margin-right: 0.5rem; }

    p a { color: #4a6fa5; text-decoration: none; font-size: 0.85rem; }
    p a:hover { text-decoration: underline; }
  </style>
</head>

<body>
  <h1>AnkiVerse</h1>
  <h2>Memorise poetry with <a href="http://ankisrs.net/">Anki</a></h2>
  <form action="/" method="post" accept-charset="UTF-8">
    <input name="utf8" type="hidden" value="&#x2713;" />
    <table>
      <tr>
        <td>
          Input poem: <br />
          <textarea name="poem" cols="80" rows="20"><%= @poem %></textarea>
        </td>
        <td>
          <div>
            <label>
              Lines to include on question card (default 4):
              <input name="lines[]" value="4"/>
            </label>
          </div>
          <div>
            <label>
              Lines to include on answer card (default 2):
              <input name="lines[]" value="2"/>
            </label>
          </div>
          <div>
            <label>
              <input name="ellipsis" type="checkbox" checked="checked"/>
              Include ellipsis (...) at end of question card
            </label>
          </div>
          <div>
            Other fields (tags, etc.):
            <% (@other_fields || [""]).each do |val| %>
              <div class="other_field">
                <input type="text" name="other_fields[]" value="<%= val %>" />
              </div>
            <% end %>
            <a href="javascript:" id="add_field">Add</a><br />
          </div>
        </td>
      </tr>
    </table>
    <input type="submit" value="Get Anki Cards" />
  </form>

  <p>
    <a href="mailto:dave@burt.id.au">Help</a>
  </p>

  <form action="/bible" id="bible_form">
    <input type="text" id="passage" name="passage" value="<%= @passage %>" />
    <label><input type="radio" name="version" value="NIV" <%= 'checked' if @version.nil? || @version == 'NIV' %> /> NIV</label>
    <label><input type="radio" name="version" value="ESV" <%= 'checked' if @version == 'ESV' %> /> ESV</label>
    <label><input type="radio" name="version" value="WEB" <%= 'checked' if @version == 'WEB' %> /> WEB</label>
    <label><input type="radio" name="version" value="KJV" <%= 'checked' if @version == 'KJV' %> /> KJV</label>
    <br />
    <label><input type="radio" name="verse_numbers" value="without_verse_numbers" <%= 'checked' if @verse_numbers != 'with_verse_numbers' %> /> Without verse numbers</label>
    <label><input type="radio" name="verse_numbers" value="with_verse_numbers" <%= 'checked' if @verse_numbers == 'with_verse_numbers' %> /> With verse numbers</label>
    <br />
    <input type="submit" value="Get Bible passage" />
  </form>

  <a href="https://github.com/dburt/ankiverse"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_gray_6d6d6d.png?resize=149%2C149" alt="Fork me on GitHub"></a>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1578876-3']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</body>
</html>
